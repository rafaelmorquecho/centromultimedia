var creative={};function preInit(){setupDom();propInit();if(Enabler.isInitialized()){init()}else{Enabler.addEventListener(studio.events.StudioEvent.INIT,init)}}function setupDom(){creative.dom={};creative.dom.mainContainer=document.getElementById("main-container");creative.dom.expandedExit=document.getElementById("expanded-exit");creative.dom.expandedContent=document.getElementById("expanded-state");creative.dom.collapsedExit=document.getElementById("collapsed-exit");creative.dom.collapsedContent=document.getElementById("collapsed-state");creative.dom.collapseButton=document.getElementById("collapse-button");creative.dom.expandButton=document.getElementById("expand-button");creative.dom.image0=document.getElementById("main-img-0");creative.dom.video1={};creative.dom.video1.vidContainer=document.getElementById("video-container-1");creative.dom.video1.vid=document.getElementById("video-1");creative.dom.video1.vidPlayBtn=document.getElementById("play-btn-1");creative.dom.video1.vidPauseBtn=document.getElementById("pause-btn-1");creative.dom.video1.vidStopBtn=document.getElementById("stop-btn-1");creative.dom.video1.vidReplayBtn=document.getElementById("replay-btn-1");creative.dom.video1.vidUnmuteBtn=document.getElementById("unmute-btn-1");creative.dom.video1.vidMuteBtn=document.getElementById("mute-btn-1");creative.dom.video1.vidProgressBar=document.getElementById("progress-bar-1");bgFb=document.getElementById("bgFb");bgTw=document.getElementById("bgTw");bgIn=document.getElementById("bgIn");bgFb2=document.getElementById("bgFb2");bgTw2=document.getElementById("bgTw2");bgIn2=document.getElementById("bgIn2")}function init(){Enabler.setStartExpanded(false);creative.autoplay1=false;creative.isClick1=false;if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPad/i))||(navigator.userAgent.match(/iPod/i))){creative.dom.video1.vidUnmuteBtn.style.opacity=0;creative.dom.video1.vidMuteBtn.style.opacity=0}addVideoTracking1();addListeners();if(Enabler.isVisible()){show()}else{Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,show)}}function addListeners(){Enabler.addEventListener(studio.events.StudioEvent.EXPAND_START,expandStartHandler);Enabler.addEventListener(studio.events.StudioEvent.EXPAND_FINISH,expandFinishHandler);Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START,collapseStartHandler);Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_FINISH,collapseFinishHandler);creative.dom.collapseButton.addEventListener("click",onCollapseClickHandler,false);creative.dom.collapsedExit.addEventListener("click",collapsedExitClickHandler);creative.dom.expandButton.addEventListener("mouseenter",onExpandHandler,false);creative.dom.expandButton.addEventListener("mouseleave",onExpandHandlerExit,false);bgFb.addEventListener("touchEnd",bgFbExit,false);bgFb.addEventListener("click",bgFbExit,false);bgTw.addEventListener("touchEnd",bgTwExit,false);bgTw.addEventListener("click",bgTwExit,false);bgIn.addEventListener("touchEnd",bgInExit,false);bgIn.addEventListener("click",bgInExit,false);bgFb2.addEventListener("touchEnd",bgFbExit,false);bgFb2.addEventListener("click",bgFbExit,false);bgTw2.addEventListener("touchEnd",bgTwExit,false);bgTw2.addEventListener("click",bgTwExit,false);bgIn2.addEventListener("touchEnd",bgInExit,false);bgIn2.addEventListener("click",bgInExit,false)}function bgFbExit(a){Enabler.exitOverride("Facebook","https://www.facebook.com/WarnerBrosPicturesEspana")}function bgTwExit(a){Enabler.exitOverride("Twitter","https://twitter.com/WarnerBrosSpain")}function bgInExit(a){Enabler.exitOverride("Instagram","https://www.instagram.com/warnerbrosspain/")}function show(){creative.dom.expandedContent.style.display="none";creative.dom.expandedExit.style.display="none";creative.dom.collapseButton.style.display="none";creative.dom.collapsedContent.style.display="block";creative.dom.collapsedExit.style.display="block";creative.dom.expandButton.style.display="block";creative.dom.image0.style.visibility="visible"}function expandStartHandler(){creative.dom.expandedContent.style.display="block";creative.dom.collapseButton.style.display="block";creative.dom.collapsedContent.style.display="none";creative.dom.collapsedExit.style.display="none";creative.dom.expandButton.style.display="none";Enabler.finishExpand()}function expandFinishHandler(){creative.dom.video1.vidMuteBtn.style.visibility="hidden";creative.dom.video1.vidUnmuteBtn.style.visibility="visible";creative.dom.video1.vidPauseBtn.style.visibility="hidden";creative.dom.video1.vidPlayBtn.style.visibility="visible";if(creative.autoplay1){if(creative.dom.video1.vid.readyState>=2){startMuted1(null)}else{creative.dom.video1.hasCanPlay=true;creative.dom.video1.vid.addEventListener("canplay",startMuted1,false)}creative.dom.video1.vidMuteBtn.style.visibility="visible";setTimeout(function(){creative.dom.video1.vidMuteBtn.style.visibility="hidden"},200)}else{creative.dom.video1.vidMuteBtn.style.visibility="visible";creative.dom.video1.vidUnmuteBtn.style.visibility="hidden";
creative.dom.video1.vidPauseBtn.style.visibility="hidden";creative.dom.video1.vidPlayBtn.style.visibility="visible"}creative.dom.video1.vidContainer.style.visibility="visible";creative.isExpanded=true}function collapseStartHandler(){creative.dom.expandedContent.style.display="none";creative.dom.expandedExit.style.display="none";creative.dom.collapseButton.style.display="none";creative.dom.collapsedContent.style.display="block";creative.dom.collapsedExit.style.display="block";creative.dom.expandButton.style.display="block";creative.dom.video1.vidMuteBtn.style.visibility="hidden";creative.dom.video1.vidUnmuteBtn.style.visibility="visible";creative.dom.video1.vidPauseBtn.style.visibility="hidden";creative.dom.video1.vidPlayBtn.style.visibility="visible";creative.dom.video1.vid.pause();Enabler.finishCollapse()}function collapseFinishHandler(){creative.isExpanded=false}function onCollapseClickHandler(){Enabler.requestCollapse();Enabler.stopTimer("Panel Expansion")}var firstTime=1;var myCounter=new Countdown({seconds:3,onUpdateStatus:function(a){$(".count").show();$(".count").html(a);$("#inside").hide()},onCounterEnd:function(){Enabler.requestExpand();Enabler.startTimer("Panel Expansion");$(".count").hide().html("3");$("#inside").show();if(firstTime==1){firstTime=0;creative.dom.video1.vid.volume=1;creative.dom.video1.vid.play()}}});function onExpandHandler(){myCounter.start()}function onExpandHandlerExit(){myCounter.stop();$(".count").hide().html("3");$("#inside").show()}function Countdown(d){var g,b=this,f=d.seconds||10,a=d.onUpdateStatus||function(){},c=d.onCounterEnd||function(){};function e(){a(f);if(f===0){c();b.stop()}f--}this.start=function(){clearInterval(g);g=0;f=d.seconds;g=setInterval(e,1000)};this.stop=function(){clearInterval(g)}}function exitClickHandler(){creative.dom.video1.vid.pause();creative.dom.video1.vid.currentTime=0;creative.dom.video1.vidPauseBtn.style.visibility="hidden";creative.dom.video1.vidPlayBtn.style.visibility="visible";if(creative.dom.video1.vid.readyState>0){creative.dom.video1.vid.currentTime=0}Enabler.requestCollapse();Enabler.stopTimer("Panel Expansion");Enabler.exit("BackgroundExit")}function collapsedExitClickHandler(){creative.dom.video1.vid.pause();creative.dom.video1.vid.currentTime=0;creative.dom.video1.vidPauseBtn.style.visibility="hidden";creative.dom.video1.vidPlayBtn.style.visibility="visible";if(creative.dom.video1.vid.readyState>0){creative.dom.video1.vid.currentTime=0}Enabler.exit("CollapsedExit")}function startMuted1(a){if(creative.dom.video1.hasCanPlay){creative.dom.video1.vid.removeEventListener("canplay",startMuted1);creative.dom.video1.hasCanPlay=false}creative.dom.video1.vid.volume=0;creative.dom.video1.vid.currentTime=0;creative.dom.video1.vid.play();creative.dom.video1.vidPauseBtn.style.visibility="visible";creative.dom.video1.vidPlayBtn.style.visibility="hidden"}function pausePlayHandler1(a){if(creative.dom.video1.vid.paused||creative.dom.video1.vid.ended){if(creative.isClick1){creative.dom.video1.vid.volume=1;creative.dom.video1.vidMuteBtn.style.visibility="visible";creative.dom.video1.vidUnmuteBtn.style.visibility="hidden";creative.isClick1=false}creative.dom.video1.vid.play();creative.dom.video1.vidPauseBtn.style.visibility="visible";creative.dom.video1.vidPlayBtn.style.visibility="hidden"}else{creative.dom.video1.vid.pause();creative.dom.video1.vidPauseBtn.style.visibility="hidden";creative.dom.video1.vidPlayBtn.style.visibility="visible"}}function muteUnmuteHandler1(a){if(creative.dom.video1.vid.volume==0){Enabler.counter("Unmute video 1",true);creative.dom.video1.vid.volume=1;creative.dom.video1.vidMuteBtn.style.visibility="visible";creative.dom.video1.vidUnmuteBtn.style.visibility="hidden"}else{Enabler.counter("Mute video 1",true);creative.dom.video1.vid.volume=0;creative.dom.video1.vidMuteBtn.style.visibility="hidden";creative.dom.video1.vidUnmuteBtn.style.visibility="visible"}}function stopHandler1(a){Enabler.counter("Video 1 stopped",true);creative.dom.video1.vid.currentTime=0;creative.dom.video1.vid.pause();creative.dom.video1.vidPauseBtn.style.visibility="hidden";creative.dom.video1.vidPlayBtn.style.visibility="visible";creative.isClick1=true}function replayHandler1(a){Enabler.counter("Replay video 1",true);creative.dom.video1.vid.currentTime=0;creative.dom.video1.vid.play();creative.dom.video1.vid.volume=1;creative.dom.video1.vidPauseBtn.style.visibility="visible";creative.dom.video1.vidMuteBtn.style.visibility="visible"}function videoEndHandler1(a){creative.dom.video1.vid.currentTime=0;creative.dom.video1.vid.pause();creative.dom.video1.vidPauseBtn.style.visibility="hidden";creative.dom.video1.vidPlayBtn.style.visibility="visible";creative.isClick1=true}function videoTimeUpdateHandler1(b){var a=creative.dom.video1.vid.currentTime/creative.dom.video1.vid.duration;creative.dom.video1.vidProgressBar.style.width=Math.round(100*a)+"%"}function addVideoTracking1(){var a=document.createElement("source");a.setAttribute("type","video/webm");a.setAttribute("src",Enabler.getUrl("video.webm"));
creative.dom.video1.vid.appendChild(a);a=document.createElement("source");a.setAttribute("type","video/mp4");a.setAttribute("src",Enabler.getUrl("video.mp4"));creative.dom.video1.vid.appendChild(a);creative.dom.video1.vid.appendChild(a);Enabler.loadModule(studio.module.ModuleId.VIDEO,function(){studio.video.Reporter.attach("Video Report 1",creative.dom.video1.vid)}.bind(this))}function propInit(){var f=1,e=1,c=$(".move > .panels").length,b=$(".moveGallery > img").length;var d="19-08-2016";var a=function(q){var i=4;var p=1;var o=2;var n=3;var m=4;var l=4;var v=24*60*60*1000;var t=q.split("-");var k=new Date();var r=parseInt(t[0])+1;var j=new Date(t[2],t[1]-1,r);i=(!i)?0:i;var s=Math.floor((j.getTime()-k.getTime())/v);var u=p;if(s==0){u=m}else{if(s==1){u=n}else{if(s>0){u=p;if(s<=i){u=o}}else{if(s<0){u=l}}}}k=null;j=null;return u};function h(){document.getElementsByClassName("fecha")[0].className+=" fecha"+a(d)}function g(){$(".arrow").click(function(){if($(this).hasClass("right")){if(e==b){$(".moveGallery").animate({left:"0%"},500);e=1}else{$(".moveGallery").animate({left:"-=100%"},500);e++}}else{if(e==1){$(".moveGallery").animate({left:"-"+(b-1)*100+"%"},500);e=b}else{$(".moveGallery").animate({left:"+=100%"},500);e--}}});$(".shapeButtons li").click(function(){creative.dom.video1.vid.pause();creative.dom.video1.vid.currentTime=0;var k=$(this).attr("class");var j=k.split(" aqui");var m=j[0].split("button");var i=parseInt(m[1]);var l=i-1;console.log(j[0]);if(j[0]=="button1"){creative.dom.video1.vid.play();firstTime=1;console.log("dentro")}else{firstTime=0}$(".shape .move").animate({left:"-"+l*100+"%"},500);f=i;$(".shapeButtons li").removeClass("aqui");$(".shapeButtons li.button"+i).addClass("aqui")})}h();g();$(".panels").css("width",100/c+"%");$("div#expanded-exit").hide();creative.dom.video1.vid.volume=0}window.addEventListener("load",preInit);